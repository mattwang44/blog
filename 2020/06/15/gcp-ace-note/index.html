<!doctype html><html lang=en-us>
<head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1">
<meta property="og:site_name" content="WHW's blog">
<meta property="og:type" content="article">
<meta property="og:image" content="https://mattwang44.dev//https://images.unsplash.com/photo-1470004914212-05527e49370b?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=2726&q=80">
<meta property="twitter:image" content="https://mattwang44.dev//https://images.unsplash.com/photo-1470004914212-05527e49370b?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=2726&q=80">
<meta name=title content="Course Note: Cloud Engineering with GCP on Coursera">
<meta property="og:title" content="Course Note: Cloud Engineering with GCP on Coursera">
<meta property="twitter:title" content="Course Note: Cloud Engineering with GCP on Coursera">
<meta name=description content="Course note of Cloud Engineering with GCP (for the preparation of GCP Associate Cloud Engineer Certification Exam)">
<meta property="og:description" content="Course note of Cloud Engineering with GCP (for the preparation of GCP Associate Cloud Engineer Certification Exam)">
<meta property="twitter:description" content="Course note of Cloud Engineering with GCP (for the preparation of GCP Associate Cloud Engineer Certification Exam)">
<meta property="twitter:card" content="summary">
<meta name=keyword content="Matt Wang, blog, Taiwan">
<link rel="shortcut icon" href=/img/favicon.ico>
<title>Course Note: Cloud Engineering with GCP on Coursera-Matt Wang's Blog</title>
<link rel=canonical href=/2020/06/15/gcp-ace-note/>
<link rel=stylesheet href=/css/iDisqus.min.css>
<link rel=stylesheet href=/css/bootstrap.min.css>
<link rel=stylesheet href=/css/hugo-theme-cleanwhite.min.css>
<link rel=stylesheet href=/css/zanshang.css>
<link href=//cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css rel=stylesheet type=text/css>
<script src=/js/jquery.min.js></script>
<script src=/js/bootstrap.min.js></script>
<script src=/js/hux-blog.min.js></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type=text/javascript></script>
<script type=text/x-mathjax-config>
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [['$','$']],
      processEscapes: true
    }
  });
</script>
</head>
<nav class="navbar navbar-default navbar-custom navbar-fixed-top">
<div class=container-fluid>
<div class="navbar-header page-scroll">
<button type=button class=navbar-toggle>
<span class=sr-only>Toggle navigation</span>
<span class=icon-bar></span>
<span class=icon-bar></span>
<span class=icon-bar></span>
</button>
<a class=navbar-brand href=/>WHW's blog</a>
</div>
<div id=huxblog_navbar>
<div class=navbar-collapse>
<ul class="nav navbar-nav navbar-right">
<li>
<a href=/>Home</a>
</li>
<li>
<a href=/categories/tech>tech</a>
</li>
<li><a href=/top/archive/>ARCHIVE</a></li>
<li><a href=/top/about/>ABOUT</a></li>
</ul>
</div>
</div>
</div>
</nav>
<script>var $body=document.body,$toggle=document.querySelector('.navbar-toggle'),$navbar=document.querySelector('#huxblog_navbar'),$collapse=document.querySelector('.navbar-collapse');$toggle.addEventListener('click',handleMagic);function handleMagic(a){$navbar.className.indexOf('in')>0?($navbar.className=" ",setTimeout(function(){$navbar.className.indexOf('in')<0&&($collapse.style.height="0px")},400)):($collapse.style.height="auto",$navbar.className+=" in")}</script>
<style type=text/css>header.intro-header{background-image:linear-gradient(rgba(0,0,0,.4),rgba(0,0,0,.4)),url(https://images.unsplash.com/photo-1523815085589-2ed388376202?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=2853&q=80)}</style>
<header class=intro-header>
<div class=container>
<div class=row>
<div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
<div class=post-heading>
<div class=tags>
<a class=tag href=/tags/gcp title=GCP>
GCP
</a>
<a class=tag href=/tags/course title=Course>
Course
</a>
</div>
<h1>Course Note: Cloud Engineering with GCP on Coursera</h1>
<h2 class=subheading></h2>
<span class=meta>
Posted by
Matt Wang
on
Monday, June 15, 2020
</span>
</div>
</div>
</div>
</div>
</header>
<article>
<div class=container>
<div class=row>
<div class="col-lg-8 col-lg-offset-2
col-md-10 col-md-offset-1
post-container">
<div class=fb-like data-href=https://mattwang44.dev/2020/06/15/gcp-ace-note/ data-width data-layout=standard data-action=like data-size=small data-share=true></div>
<p>This is the note of the course <a href=https://www.coursera.org/professional-certificates/cloud-engineering-gcp target=_blank>Cloud Engineering with GCP</a>
.
Go to <a href=/2020/07/01/gcp-ace/>this article</a>
to see how I prepared for GCP ACE exam.</p>
<h2 id=mind-map>Mind Map</h2>
<script src=/js/mindmap.min.js></script>
<script src=/js/kity.min.js></script>
<script src=/js/kityminder.core.min.js></script>
<link rel=stylesheet href=/css/mindmap.css>
<div class="mindmap mindmap-lg">
<ul>
<li>GCP
<ul>
<li>Network Resources
<ul>
<li>VPC
<ul>
<li>Network</li>
<li>Subnet</li>
<li>IP</li>
</ul>
</li>
<li>Load Balancer
<ul>
<li>HTTP(S)</li>
<li>SSL Proxy</li>
<li>TCP Proxy</li>
<li>Regional</li>
<li>Multi-Regional</li>
</ul>
</li>
<li>VPN & Peering & Interconnect</li>
</ul>
</li>
<li>Compute Services
<ul>
<li>Compute Engine (GCE)
<ul>
<li>Disk type
<ul>
<li>persistent
<ul>
<li>HDD/SSD</li>
</ul>
</li>
<li>Local SSD</li>
</ul>
</li>
<li>Instance template</li>
<li>Instance group</li>
</ul>
</li>
<li>App Engine (GAE)
<ul>
<li>Standard</li>
<li>Flexible</li>
</ul>
</li>
<li>Kubernetes Engine (GKE)</li>
<li>Cloud Function</li>
</ul>
</li>
<li>Storage
<ul>
<li>Data warehouse
<ul>
<li>BigQuery</li>
</ul>
</li>
<li>Database
<ul>
<li>NoSQL
<ul>
<li>BigTable</li>
<li>Cloud Firestore
<ul>
<li>Datastore mode</li>
<li>Native mode</li>
</ul>
</li>
</ul>
</li>
<li>Relational
<ul>
<li>Cloud SQL</li>
<li>Cloud Spanner</li>
</ul>
</li>
<li>Redis/Memcache
<ul>
<li>Cloud Memorystore</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>SDK
<ul>
<li><a href=https://cloud.google.com/sdk/gcloud/reference target=_blank>&lt;code>gcloud&lt;/code></a>
</li>
<li><a href=https://cloud.google.com/storage/docs/gsutil/commands/acl target=_blank>&lt;code>gsutil&lt;/code></a>
</li>
<li><a href=https://cloud.google.com/bigquery/docs/reference/bq-cli-reference#command-specific_flags target=_blank>&lt;code>bq&lt;/code></a>
</li>
</ul>
</li>
<li>Stackdriver
<ul>
<li>Monitoring</li>
<li>Logging</li>
<li>Debug</li>
<li>Error reporting</li>
<li>Trace</li>
</ul>
</li>
<li>Big data services
<ul>
<li>BigQuery</li>
<li>Cloud Dataproc</li>
<li>Cloud Dataflow</li>
<li>Cloud Pub/Sub</li>
<li>Cloud Datalab</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<h2 id=sdk>SDK</h2>
<ul>
<li><a href=https://cloud.google.com/sdk/#Quick_Start target=_blank>Cloud SDK installation and quick start</a>
</li>
<li><a href=https://cloud.google.com/sdk/gcloud/ target=_blank>gcloud tool guide</a>
</li>
<li><a href=https://cloud.google.com/sdk/gcloud/reference target=_blank>&lt;code>gcloud&lt;/code> command</a>
</li>
<li><a href=https://cloud.google.com/storage/docs/gsutil/commands/acl target=_blank>&lt;code>gsutil&lt;/code> command</a>
</li>
<li><a href=https://cloud.google.com/bigquery/docs/reference/bq-cli-reference#command-specific_flags target=_blank>&lt;code>bq&lt;/code> command</a>
</li>
</ul>
<h2 id=resource-management>Resource Management</h2>
<ul>
<li>Resource Hierarchy
<ul>
<li>Global
<ul>
<li>Images</li>
<li>Snapshots</li>
<li>Networks</li>
</ul>
</li>
<li>Regional
<ul>
<li>External IP addr.</li>
</ul>
</li>
<li>Zonal
<ul>
<li>Instances</li>
<li>Disks</li>
</ul>
</li>
</ul>
</li>
<li>label vs tag
<ul>
<li>
<table>
<thead>
<tr>
<th style=text-align:center>label</th>
<th style=text-align:center>tag</th>
</tr>
</thead>
<tbody>
<tr>
<td style=text-align:center>user-defined kv pair</td>
<td style=text-align:center>user-defined string</td>
</tr>
<tr>
<td style=text-align:center>propagated through billing</td>
<td style=text-align:center>firewall rules</td>
</tr>
</tbody>
</table>
</li>
</ul>
</li>
</ul>
<h3 id=billing>Billing</h3>
<ul>
<li><a href=https://cloud.google.com/billing/docs/ target=_blank>Docs - Billing</a>
</li>
<li><a href=https://cloud.google.com/products/calculator/ target=_blank>Pricing Calculator</a>
</li>
<li>Four tools
<ul>
<li>Budget & Alerts</li>
<li>Billing export -> to <a href=https://cloud.google.com/billing/docs/how-to/export-data-bigquery target=_blank>BQ</a>
or <a href=https://cloud.google.com/billing/docs/how-to/export-data-file target=_blank>Cloud Storage</a>
</li>
<li>Reports</li>
<li>Quotas
<ul>
<li>types
<ul>
<li>Rate Quotas: e.g. GKE API: 1000 requests per 100 sec</li>
<li>Allocation Quotas: e.g. 5 networks per project</li>
</ul>
</li>
<li>can be canged on quota page</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id=gcp-hiearchy>GCP Hiearchy</h2>
<ul>
<li>Organization (-Folder (- Folder)) - Project - Resource</li>
<li>Policies are inherited downwards</li>
</ul>
<link rel=stylesheet href=/css/hugo-easy-gallery.css>
<div class=box style=max-width:500px>
<figure itemprop=associatedMedia itemscope itemtype=http://schema.org/ImageObject>
<div class=img>
<img itemprop=thumbnail src=https://cloud.google.com/resource-manager/img/cloud-folders-hierarchy.png>
</div>
<a href=https://cloud.google.com/resource-manager/img/cloud-folders-hierarchy.png itemprop=contentUrl></a>
</figure>
</div>
<table>
<thead>
<tr>
<th style=text-align:center>Project ID</th>
<th style=text-align:center>Project name</th>
<th style=text-align:center>Project number</th>
</tr>
</thead>
<tbody>
<tr>
<td style=text-align:center>globally unique</td>
<td style=text-align:center>not need to be unique</td>
<td style=text-align:center>globally unique</td>
</tr>
<tr>
<td style=text-align:center>user defined</td>
<td style=text-align:center>user defined</td>
<td style=text-align:center>assigned by GCP</td>
</tr>
<tr>
<td style=text-align:center>immutable</td>
<td style=text-align:center>mutable</td>
<td style=text-align:center>immutable</td>
</tr>
</tbody>
</table>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=color:#6272a4># set default project</span>
gcloud config <span style=color:#8be9fd;font-style:italic>set</span> project &lt;project id&gt;
</code></pre></div><h2 id=iam>IAM</h2>
<ul>
<li><code>Who</code> <code>can do what</code> <code>on which resource</code></li>
<li>3 types of IAM Roles:
<ul>
<li><strong>Primitive</strong>
<ul>
<li>Owner: invite/remove members, delete project</li>
<li>Editor: deploy/modified/configure</li>
<li>Viewer: read-only</li>
<li>Billing Administrator: control billing but not affect projects</li>
</ul>
</li>
<li><strong>Predefined</strong></li>
<li><strong>Custom</strong></li>
</ul>
</li>
<li>Services Account
<ul>
<li>Authentication for services</li>
<li>Use email addr. & cryptographic keys</li>
</ul>
</li>
<li>commands
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=color:#6272a4># add IAM policy binding for a project</span>
gcloud projects add-iam-policy-binding --member<span style=color:#ff79c6>=(</span>user|group|serviceAccount:email<span style=color:#ff79c6>)</span> --role<span style=color:#ff79c6>=</span>ROLE
</code></pre></div></li>
<li>IAM policy (<a href=https://cloud.google.com/iam/docs/reference/rest/v1/Policy target=_blank>doc</a>
)
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=color:#6272a4># sample IAM policy</span>
<span style=color:#ff79c6>{</span>
  <span style=color:#f1fa8c>&#34;bindings&#34;</span>: <span style=color:#ff79c6>[</span>
    <span style=color:#ff79c6>{</span>
      <span style=color:#f1fa8c>&#34;role&#34;</span>: <span style=color:#f1fa8c>&#34;roles/resourcemanager.organizationAdmin&#34;</span>,
      <span style=color:#f1fa8c>&#34;members&#34;</span>: <span style=color:#ff79c6>[</span>
        <span style=color:#f1fa8c>&#34;user:mike@example.com&#34;</span>,
        <span style=color:#f1fa8c>&#34;group:admins@example.com&#34;</span>,
        <span style=color:#f1fa8c>&#34;domain:google.com&#34;</span>,
        <span style=color:#f1fa8c>&#34;serviceAccount:my-project-id@appspot.gserviceaccount.com&#34;</span>
      <span style=color:#ff79c6>]</span>
    <span style=color:#ff79c6>}</span>,
    <span style=color:#ff79c6>{</span>
      <span style=color:#f1fa8c>&#34;role&#34;</span>: <span style=color:#f1fa8c>&#34;roles/resourcemanager.organizationViewer&#34;</span>,
      <span style=color:#f1fa8c>&#34;members&#34;</span>: <span style=color:#ff79c6>[</span>
        <span style=color:#f1fa8c>&#34;user:eve@example.com&#34;</span>
      <span style=color:#ff79c6>]</span>,
      <span style=color:#f1fa8c>&#34;condition&#34;</span>: <span style=color:#ff79c6>{</span>
        <span style=color:#f1fa8c>&#34;title&#34;</span>: <span style=color:#f1fa8c>&#34;expirable access&#34;</span>,
        <span style=color:#f1fa8c>&#34;description&#34;</span>: <span style=color:#f1fa8c>&#34;Does not grant access after Sep 2020&#34;</span>,
        <span style=color:#f1fa8c>&#34;expression&#34;</span>: <span style=color:#f1fa8c>&#34;request.time &lt; timestamp(&#39;2020-10-01T00:00:00.000Z&#39;)&#34;</span>,
      <span style=color:#ff79c6>}</span>
    <span style=color:#ff79c6>}</span>
  <span style=color:#ff79c6>]</span>,
  <span style=color:#f1fa8c>&#34;etag&#34;</span>: <span style=color:#f1fa8c>&#34;BwWWja0YfJA=&#34;</span>,
  <span style=color:#f1fa8c>&#34;version&#34;</span>: <span style=color:#bd93f9>3</span>
<span style=color:#ff79c6>}</span>
</code></pre></div></li>
<li>audit log: logs of Admin Activity, Data Access, and System Event
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=color:#6272a4># read audit log, `project` can be changed to `folder` or `organization`</span>
gcloud logging <span style=color:#8be9fd;font-style:italic>read</span> <span style=color:#f1fa8c>&#34;logName : projects/project-id/logs/cloudaudit.googleapis.com&#34;</span> --project<span style=color:#ff79c6>=</span>project-id
</code></pre></div></li>
<li>Resource manager roles
<ul>
<li>organization
<ul>
<li>Admin: full control over all resources</li>
<li>Viewer: view access to all resources</li>
</ul>
</li>
<li>folder
<ul>
<li>Admin: full control over folders</li>
<li>Creator: browse hierarchy and create folder</li>
<li>Viewer: view folders and projects below a resources</li>
</ul>
</li>
<li>project
<ul>
<li>Creator: create projects</li>
<li>Deleter: delete projects</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li><a href=https://cloud.google.com/iam/docs/ target=_blank>Docs</a>
</li>
<li><a href=https://cloud.google.com/iam/docs/understanding-roles target=_blank>Docs - Understanding IAM roles</a>
</li>
<li><a href=https://www.coursera.org/learn/gcp-infrastructure-core-services/lecture/xghL2/cloud-iam-best-practices target=_blank>Best Practices</a>
</li>
<li><a href=https://cloud.google.com/identity/ target=_blank>Google Cloud Identity</a>
</li>
<li><a href=https://cloud.google.com/iam/docs/understanding-service-accounts target=_blank>Understanding Service Accounts</a>
</li>
<li><a href=https://cloud.google.com/logging/docs/audit/ target=_blank>Cloud Audit Logging overview</a>
</li>
<li><a href=https://www.qwiklabs.com/quests/40 target=_blank>Security and Identity Fundamentals Quest</a>
</li>
</ul>
<h2 id=compute-resources>Compute Resources</h2>
<ul>
<li><a href=https://www.coursera.org/learn/preparing-cloud-associate-cloud-engineer-exam/lecture/1VqS2/planning-and-configuring-compute-resources target=_blank>Brief Comparison: App Engine, Compute Engine, GKE</a>
</li>
<li><a href=https://cloud.google.com/blog/products/gcp/choosing-the-right-compute-option-in-gcp-a-decision-tree target=_blank>Related Blogpost from GCP</a>
</li>
<li><a href=https://cloud.google.com/hosting-options target=_blank>Product page - hosting options</a>
</li>
</ul>
<table>
<thead>
<tr>
<th style=text-align:center></th>
<th style=text-align:center>GCE</th>
<th style=text-align:center>GKE</th>
<th style=text-align:center>GAE-standard</th>
<th style=text-align:center>GAE-flexible</th>
<th style=text-align:center>Cloud Functions</th>
</tr>
</thead>
<tbody>
<tr>
<td style=text-align:center>Lang</td>
<td style=text-align:center>Any</td>
<td style=text-align:center>Any</td>
<td style=text-align:center>Python, Node.js, Go, Java, PHP</td>
<td style=text-align:center>Python, Node.js, Go, Java, PHP, Ruby, .NET, Custom Runtime</td>
<td style=text-align:center>Python, Node.js, Go</td>
</tr>
<tr>
<td style=text-align:center>Scaling</td>
<td style=text-align:center>server autoscaling</td>
<td style=text-align:center>cluster</td>
<td style=text-align:center>autoscaling managed servers</td>
<td style=text-align:center>autoscaling managed servers</td>
<td style=text-align:center>serverless</td>
</tr>
<tr>
<td style=text-align:center>Use case</td>
<td style=text-align:center>general</td>
<td style=text-align:center>container workloads</td>
<td style=text-align:center>scalable web app, mobile backend app</td>
<td style=text-align:center>scalable web app, mobile backend app</td>
<td style=text-align:center>light-weightevent actions</td>
</tr>
</tbody>
</table>
<h3 id=app-engine-gae>App Engine (GAE)</h3>
<ul>
<li><a href=https://cloud.google.com/source-repositories/docs/ target=_blank>Docs - Cloud Source</a>
</li>
<li><a href=https://cloud.google.com/appengine/docs/standard/python/how-instances-are-managed target=_blank>Docs - How instances are managed</a>
</li>
</ul>
<table>
<thead>
<tr>
<th style=text-align:center></th>
<th style=text-align:center>Standard</th>
<th style=text-align:center>Flexible</th>
</tr>
</thead>
<tbody>
<tr>
<td style=text-align:center>Language</td>
<td style=text-align:center>Java, Python, Go, PHP</td>
<td style=text-align:center>any</td>
</tr>
<tr>
<td style=text-align:center>Instance startup</td>
<td style=text-align:center>milli-secs</td>
<td style=text-align:center>minutes</td>
</tr>
<tr>
<td style=text-align:center>SSH</td>
<td style=text-align:center>N</td>
<td style=text-align:center>Y</td>
</tr>
<tr>
<td style=text-align:center>3rd-party lib</td>
<td style=text-align:center>N</td>
<td style=text-align:center>Y</td>
</tr>
<tr>
<td style=text-align:center>Pricing model</td>
<td style=text-align:center>after free daily use, pay per instance class, w/ auto-shutdown</td>
<td style=text-align:center>Pay for resource alloc. per hour, no auto-shutdown</td>
</tr>
<tr>
<td style=text-align:center>other</td>
<td style=text-align:center>all requests timeout is 60 sec</td>
<td></td>
</tr>
</tbody>
</table>
<ul>
<li>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=color:#6272a4># migrate the service to new version</span>
gcloud app versions migrate v2 --service<span style=color:#ff79c6>=</span><span style=color:#f1fa8c>&#34;s1&#34;</span>

<span style=color:#6272a4># split traffic evenly between &#39;v1&#39; and &#39;v2&#39; of service &#39;s1&#39;, run:</span>
gcloud app services set-traffic s1 --splits <span style=color:#8be9fd;font-style:italic>v2</span><span style=color:#ff79c6>=</span>.5,v1<span style=color:#ff79c6>=</span>.5

<span style=color:#6272a4># deploy but send no traffic</span>
gcloud app deploy --no-promote
</code></pre></div></li>
</ul>
<h3 id=compute-engine-gce>Compute Engine (GCE)</h3>
<ul>
<li><a href=https://cloud.google.com/compute/docs/ target=_blank>Docs</a>
</li>
<li>Features
<ul>
<li>choose vCPUs & memory</li>
<li>Networking</li>
<li>Access
<ul>
<li>Linux: SSH (tcp:22)</li>
<li>Windows: RDP (tcp:3389)</li>
</ul>
</li>
<li>metadata server
<ul>
<li>e.g. <code>startup-script-url</code> & <code>shutdown-script-url</code></li>
<li>fetch instance metadata from application (<a href=https://cloud.google.com/compute/docs/storing-retrieving-metadata#querying target=_blank>doc</a>
)
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>curl metadata.google.internal/computeMetadata/v1/
</code></pre></div></li>
</ul>
</li>
<li>OS images (<a href=https://cloud.google.com/compute/docs/images target=_blank>doc</a>
)
<ul>
<li>Choose between
<ul>
<li>public base images</li>
<li>custom images</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>machine types
<ul>
<li>predefined
<ul>
<li>
<table>
<thead>
<tr>
<th style=text-align:center></th>
<th style=text-align:center>standard</th>
<th style=text-align:center>high-memory</th>
<th style=text-align:center>high-CPU</th>
<th style=text-align:center>memory-optimized</th>
<th style=text-align:center>compute-optimized</th>
<th style=text-align:center>shared-core</th>
</tr>
</thead>
<tbody>
<tr>
<td style=text-align:center>name</td>
<td style=text-align:center><code>n1-standard-&lt;N></code></td>
<td style=text-align:center><code>n1-highmem-&lt;N></code></td>
<td style=text-align:center><code>n1-highcpu-&lt;N></code></td>
<td style=text-align:center><code>n1-ultramem-&lt;N></code></td>
<td style=text-align:center><code>c2-standard-&lt;N></code></td>
<td style=text-align:center><code>f1-micro</code>, <code>g1-small</code></td>
</tr>
<tr>
<td style=text-align:center>mem/vCPU ratio</td>
<td style=text-align:center>3.75GB</td>
<td style=text-align:center>6.5GB</td>
<td style=text-align:center>0.9GB</td>
<td style=text-align:center>~24GB</td>
<td style=text-align:center>4GB</td>
<td style=text-align:center></td>
</tr>
<tr>
<td style=text-align:center></td>
<td style=text-align:center></td>
<td style=text-align:center></td>
<td style=text-align:center></td>
<td style=text-align:center></td>
<td style=text-align:center>new platform</td>
<td style=text-align:center>for small intensive app</td>
</tr>
</tbody>
</table>
</li>
<li>(<code>N</code> indicates # of vCPUs)</li>
</ul>
</li>
<li>custom
<ul>
<li>number of vCPU = $2^n$ ($n = 0, 1, 2,&mldr;$)</li>
<li>memory must in (0.9, 6.5) GB per vCPU</li>
<li>total memory must be multiple of 256MB</li>
<li>extend memory -> provide higher memory/vCPU ratio with additional cost</li>
</ul>
</li>
</ul>
</li>
<li>disk:
<ul>
<li><strong>persistent</strong>: up to 128 disks x 0.5TB (64TB in total)
<ul>
<li><strong>HDD</strong> (standard) & <strong>SSD</strong></li>
<li>resize while running</li>
<li>encryption keys</li>
<li>snapshot for backup (<a href=https://cloud.google.com/compute/docs/disks/create-snapshots target=_blank>doc</a>
)</li>
</ul>
</li>
<li><strong>local SSD</strong>: up to 8disk x 375GB (3TB in total)</li>
<li>
<table>
<thead>
<tr>
<th style=text-align:center></th>
<th style=text-align:center>HDD</th>
<th style=text-align:center>SSD</th>
<th style=text-align:center>local SSD</th>
<th style=text-align:center>RAM Disk</th>
</tr>
</thead>
<tbody>
<tr>
<td style=text-align:center>data redundency</td>
<td style=text-align:center>Y</td>
<td style=text-align:center>Y</td>
<td style=text-align:center>N</td>
<td style=text-align:center>N</td>
</tr>
<tr>
<td style=text-align:center>encryption at rest</td>
<td style=text-align:center>Y</td>
<td style=text-align:center>Y</td>
<td style=text-align:center>Y</td>
<td style=text-align:center>N/A</td>
</tr>
<tr>
<td style=text-align:center>snapshotting</td>
<td style=text-align:center>Y</td>
<td style=text-align:center>Y</td>
<td style=text-align:center>N</td>
<td style=text-align:center>N</td>
</tr>
<tr>
<td style=text-align:center>bootable</td>
<td style=text-align:center>Y</td>
<td style=text-align:center>Y</td>
<td style=text-align:center>N</td>
<td style=text-align:center>N</td>
</tr>
<tr>
<td style=text-align:center>use case</td>
<td style=text-align:center>general, bulk file store</td>
<td style=text-align:center>random IOPS</td>
<td style=text-align:center>high IOPS, low latency</td>
<td style=text-align:center>low latency & risk of data loss</td>
</tr>
</tbody>
</table>
</li>
</ul>
</li>
<li>Billing
<ul>
<li>per-second billing (with minimum of 1-min cost)</li>
<li>each vCPU & GB of memory is billed separately</li>
<li>discount
<ul>
<li>sustained use (monthly-based)</li>
<li>committed use (1-3 years)</li>
<li>preemptible
<ul>
<li>cost reduced up to 80%</li>
<li>live up to 24 hour</li>
<li>no auto-restart</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=color:#6272a4># create an instance</span>
gcloud compute instances create --machine-type<span style=color:#ff79c6>=</span>&lt;machine-type&gt; &lt;instance_name&gt;

<span style=color:#6272a4># move an instance to another zone within same region</span>
gcloud compute instances move &lt;instance_name&gt;
</code></pre></div><ul>
<li>move instance to another region
<ul>
<li>make snapshot of persistent disk</li>
<li>create new persistent disk in target zones by restoring from snapshot</li>
<li>create VMs in target zones</li>
<li>assign static IP, update the VM&rsquo;s references, and then delete the original VM</li>
</ul>
</li>
</ul>
<h4 id=instance-group>Instance Group</h4>
<ul>
<li><a href=https://cloud.google.com/compute/docs/instance-groups/ target=_blank>Docs - Instance Group</a>
</li>
<li><a href=https://cloud.google.com/compute/docs/instance-templates/ target=_blank>Docs - Instance Template</a>
</li>
<li><a href=https://cloud.google.com/compute/docs/instances/create-vm-from-instance-template target=_blank>Docs - Create VM from Template</a>
</li>
<li><a href=https://cloud.google.com/compute/docs/instance-groups/creating-groups-of-managed-instances target=_blank>Docs - Create Groups of Managed Instances</a>
</li>
</ul>
<h4 id=autoscaling>Autoscaling</h4>
<ul>
<li><a href=https://cloud.google.com/compute/docs/autoscaler/ target=_blank>Docs - Autoscaling</a>
</li>
</ul>
<h3 id=kubernetes-engine-gke>Kubernetes Engine (GKE)</h3>
<ul>
<li><a href=https://cloud.google.com/kubernetes-engine/docs target=_blank>Docs</a>
</li>
</ul>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=color:#6272a4># create cluster</span>
gcloud container clusters create &lt;name&gt;

<span style=color:#6272a4># Add node to node pool (scale)</span>
gcloud container clusters resize --num-nodes<span style=color:#ff79c6>=</span><span style=color:#bd93f9>3</span>

<span style=color:#6272a4># scale a deployment</span>
kubectl scale &lt;service&gt; --replica<span style=color:#ff79c6>=</span><span style=color:#bd93f9>3</span>

<span style=color:#6272a4># auto scale</span>
kubectl autoscale &lt;service&gt; --min<span style=color:#ff79c6>=</span><span style=color:#bd93f9>10</span> --max<span style=color:#ff79c6>=</span><span style=color:#bd93f9>15</span> --cpu<span style=color:#ff79c6>=</span><span style=color:#bd93f9>80</span>
</code></pre></div><h2 id=storage>Storage</h2>
<ul>
<li><a href=https://www.coursera.org/learn/preparing-cloud-associate-cloud-engineer-exam/lecture/w16oO/planning-and-configuring-data-storage target=_blank>Brief Intro</a>
</li>
<li><a href=https://www.coursera.org/learn/preparing-cloud-associate-cloud-engineer-exam/lecture/oKobq/deploying-and-implementing-data-solutions target=_blank>Comparison</a>
</li>
<li><a href=https://cloud.google.com/products/storage target=_blank>Product page - Cloud Storage</a>
</li>
</ul>
<h3 id=cloud-storage-gcs>Cloud Storage (GCS)</h3>
<ul>
<li>
<p>Fully-managed scalable -> no manually provisioning is needed</p>
</li>
<li>
<p>Not a filesystem</p>
</li>
<li>
<p>Always encrypted with HTTPS</p>
</li>
<li>
<p><code>gsutil</code> is frequently used</p>
</li>
<li>
<p>Can enable versioning</p>
<ul>
<li>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>gsutil versioning <span style=color:#8be9fd;font-style:italic>set</span> <span style=color:#ff79c6>(</span>on|off<span style=color:#ff79c6>)</span> gs://&lt;bucket_name&gt;
</code></pre></div></li>
</ul>
</li>
<li>
<p>Data transfer</p>
<ul>
<li>resumable by default</li>
<li><code>-m</code> for transfering in parallel:
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>gsutil -m cp -p file gs://bucket/object
</code></pre></div></li>
<li>Use BOTO file for additional configuration - <a href=https://cloud.google.com/storage/docs/gsutil/commands/config target=_blank>doc</a>
</li>
<li>Streaming upload/download with <code>-I</code> option (<a href=https://cloud.google.com/storage/docs/gsutil/commands/cp target=_blank>doc</a>
)
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>some_program | gsutil -m cp -I gs://my-bucket
</code></pre></div></li>
</ul>
</li>
<li>
<p>ACL (Access Control Lists)</p>
<ul>
<li>e.g.
<ul>
<li>e-mail</li>
<li><code>allUsers</code></li>
<li><code>allAuthenticatedUsers</code></li>
</ul>
</li>
<li>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=color:#6272a4># set ACL</span>
gsutil acl <span style=color:#8be9fd;font-style:italic>set</span> private gs://bucket

<span style=color:#6272a4># Change ACL for all users to have read access (O for owner, W for write, R for read)</span>
gsutil acl ch -u AllUsers:R gs://example-bucket/example-object
</code></pre></div></li>
</ul>
</li>
<li>
<p>signed URL</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=color:#6272a4># duration = 10 minutes</span>
gsutil signurl -d 10m /path/to/key gs://bucket/object
</code></pre></div></li>
</ul>
<h4 id=storage-class>Storage Class</h4>
<ul>
<li><a href=https://cloud.google.com/storage/docs/storage-classes target=_blank>Docs - Storage Classes</a>
</li>
<li>Regional or Multi-regional can be changed to Nearline or Coldline</li>
<li>Regional cannot be changed to Multi-regional and vice versa</li>
</ul>
<table>
<thead>
<tr>
<th style=text-align:center></th>
<th style=text-align:center>Multi-Regional</th>
<th style=text-align:center>Regional</th>
<th style=text-align:center>Nearline</th>
<th style=text-align:center>Coldline</th>
</tr>
</thead>
<tbody>
<tr>
<td style=text-align:center>Data that is</td>
<td style=text-align:center>Frequently access</td>
<td style=text-align:center>Freqenctly access within region</td>
<td style=text-align:center>Access less than once per month</td>
<td style=text-align:center>Access less than once per year</td>
</tr>
<tr>
<td style=text-align:center>SLA</td>
<td style=text-align:center>99.95%</td>
<td style=text-align:center>99.90%</td>
<td style=text-align:center>99%</td>
<td style=text-align:center>99%</td>
</tr>
<tr>
<td style=text-align:center>Storage Price</td>
<td style=text-align:center>$\star\star\star\star$</td>
<td style=text-align:center>$\star\star\star$</td>
<td style=text-align:center>$\star\star$</td>
<td style=text-align:center>$\star$</td>
</tr>
<tr>
<td style=text-align:center>Retrieval Price</td>
<td style=text-align:center>$\star$</td>
<td style=text-align:center>$\star$</td>
<td style=text-align:center>$\star\star\star$</td>
<td style=text-align:center>$\star\star\star$</td>
</tr>
<tr>
<td style=text-align:center>Use cases</td>
<td style=text-align:center>Content storage & delivery</td>
<td style=text-align:center>In-region analytics, GCE/GKE-related data</td>
<td style=text-align:center>Long-tail content, backup</td>
<td style=text-align:center>Archiving, disaster recovery</td>
</tr>
<tr>
<td style=text-align:center>minimum duration</td>
<td style=text-align:center>-</td>
<td style=text-align:center>-</td>
<td style=text-align:center>30 days</td>
<td style=text-align:center>90 days</td>
</tr>
</tbody>
</table>
<h4 id=lifecycle>Lifecycle</h4>
<ul>
<li><a href=https://cloud.google.com/storage/docs/lifecycle target=_blank>Docs - Lifecycle</a>
</li>
<li>e.g.
<ul>
<li>delete objects older than XXX days</li>
<li>delete objects created before &lt;Date></li>
<li>keep N latest version only</li>
</ul>
</li>
<li>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell>gsutil lifecycle <span style=color:#8be9fd;font-style:italic>set</span> &lt;config-json-file&gt; gs://bucket
</code></pre></div></li>
<li>config file example
<ul>
<li>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=color:#6272a4># Move object from multi regional to COLDLINE in 30 days and delete after 300 days after creation</span>
<span style=color:#ff79c6>{</span>
  <span style=color:#f1fa8c>&#34;lifecycle&#34;</span>: <span style=color:#ff79c6>{</span>
    <span style=color:#f1fa8c>&#34;rule&#34;</span>: <span style=color:#ff79c6>[</span>
      <span style=color:#ff79c6>{</span>
        <span style=color:#f1fa8c>&#34;action&#34;</span>: <span style=color:#ff79c6>{</span>
          <span style=color:#f1fa8c>&#34;type&#34;</span>: <span style=color:#f1fa8c>&#34;SetStorageClass&#34;</span>,
          <span style=color:#f1fa8c>&#34;storageClass&#34;</span>: <span style=color:#f1fa8c>&#34;COLDLINE&#34;</span>
        <span style=color:#ff79c6>}</span>,
        <span style=color:#ff79c6>{</span>
          <span style=color:#f1fa8c>&#34;condition&#34;</span>: <span style=color:#ff79c6>{</span>
            <span style=color:#f1fa8c>&#34;age&#34;</span>: 30,
            <span style=color:#f1fa8c>&#34;matchesStorageClass&#34;</span>: <span style=color:#ff79c6>[</span><span style=color:#f1fa8c>&#34;MULTI_REGIONAL&#34;</span>, <span style=color:#f1fa8c>&#34;STANDARD&#34;</span>, <span style=color:#f1fa8c>&#34;DURABLE_REDUCED_AVAILABILITY&#34;</span><span style=color:#ff79c6>]</span>
          <span style=color:#ff79c6>}</span>
        <span style=color:#ff79c6>}</span>
      <span style=color:#ff79c6>}</span>,
      <span style=color:#ff79c6>{</span>
        <span style=color:#f1fa8c>&#34;action&#34;</span>: <span style=color:#ff79c6>{</span>
          <span style=color:#f1fa8c>&#34;type&#34;</span>: <span style=color:#f1fa8c>&#34;Delete&#34;</span>
        <span style=color:#ff79c6>}</span>,
        <span style=color:#f1fa8c>&#34;condition&#34;</span>: <span style=color:#ff79c6>{</span>
          <span style=color:#f1fa8c>&#34;age&#34;</span>: 270,
          <span style=color:#f1fa8c>&#34;storageClass&#34;</span>: <span style=color:#f1fa8c>&#34;COLDLINE&#34;</span>
        <span style=color:#ff79c6>}</span>
      <span style=color:#ff79c6>}</span>
    <span style=color:#ff79c6>]</span>
  <span style=color:#ff79c6>}</span>
<span style=color:#ff79c6>}</span>
</code></pre></div></li>
</ul>
</li>
</ul>
<h2 id=database-services>Database Services</h2>
<ul>
<li>Data storage comparison
<ul>
<li>
<table>
<thead>
<tr>
<th style=text-align:center></th>
<th style=text-align:center>Cloud Datastore</th>
<th style=text-align:center>Bigtable</th>
<th style=text-align:center>Cloud Storage</th>
<th style=text-align:center>Cloud SQL</th>
<th style=text-align:center>Cloud Spanner</th>
<th style=text-align:center>BigQuery</th>
</tr>
</thead>
<tbody>
<tr>
<td style=text-align:center>Type</td>
<td style=text-align:center>NoSQL Document</td>
<td style=text-align:center>NoSQL wide-column</td>
<td style=text-align:center>Blobstore</td>
<td style=text-align:center>Relational SQL for OLTP</td>
<td style=text-align:center>Relational SQL for OLTP</td>
<td style=text-align:center>Relational SQL for OLAP</td>
</tr>
<tr>
<td style=text-align:center>Transaction</td>
<td style=text-align:center>Y</td>
<td style=text-align:center>Single-row</td>
<td style=text-align:center>N</td>
<td style=text-align:center>Y</td>
<td style=text-align:center>Y</td>
<td style=text-align:center>N</td>
</tr>
<tr>
<td style=text-align:center>Complex query</td>
<td style=text-align:center>N</td>
<td style=text-align:center>N</td>
<td style=text-align:center>N</td>
<td style=text-align:center>Y</td>
<td style=text-align:center>Y</td>
<td style=text-align:center>Y</td>
</tr>
<tr>
<td style=text-align:center>Capacity</td>
<td style=text-align:center>TB+</td>
<td style=text-align:center>Pb+</td>
<td style=text-align:center>Pb+</td>
<td style=text-align:center>TB</td>
<td style=text-align:center>Pb</td>
<td style=text-align:center>Pb+</td>
</tr>
<tr>
<td style=text-align:center>Unit Size</td>
<td style=text-align:center>1Mb/entity</td>
<td style=text-align:center>~10Mb/cell, ~100Mb/row</td>
<td style=text-align:center>5TB/object</td>
<td style=text-align:center>determined by engine</td>
<td style=text-align:center>10240MiB/row</td>
<td style=text-align:center>10Mb/row</td>
</tr>
<tr>
<td style=text-align:center>Best for</td>
<td style=text-align:center>Semi-structured app data</td>
<td style=text-align:center>analytical data, heavy read/write</td>
<td style=text-align:center></td>
<td style=text-align:center>Web app</td>
<td style=text-align:center>Large-scale app</td>
<td style=text-align:center>interactive querying, offline analytics</td>
</tr>
<tr>
<td style=text-align:center>Use Case</td>
<td style=text-align:center>App</td>
<td style=text-align:center>IoT, AddTech</td>
<td style=text-align:center>Images, media files</td>
<td style=text-align:center></td>
<td style=text-align:center>High I/O, global consistency is needed</td>
<td style=text-align:center>Data warehouse</td>
</tr>
<tr>
<td style=text-align:center></td>
<td style=text-align:center>SQL-like query, free daily quota</td>
<td style=text-align:center>Same API with HBase, user can increase # of instance</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
</li>
</ul>
</li>
<li>Decision chart
<ul>
<li>data structured?
<ul>
<li>No -> <strong>Cloud Storage</strong></li>
<li>Yes -> Analytic workload?
<ul>
<li>Yes -> need updates or low latency
<ul>
<li>Yes -> <strong>BigTable</strong></li>
<li>No -> <strong>BigQuery</strong></li>
</ul>
</li>
<li>No -> Relational data?
<ul>
<li>No -> <strong>Cloud Firestore</strong></li>
<li>Yes -> Need horizontal scale
<ul>
<li>Yes -> <strong>Cloud Spanner</strong></li>
<li>No -> <strong>Cloud SQL</strong></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id=bigtable>Bigtable</h3>
<ul>
<li>Feats
<ul>
<li>scale to PB</li>
<li>Low latency (sub 10ms)</li>
<li>Auto update index for frequently accessed data -> balance workload between nodes</li>
</ul>
</li>
</ul>
<h3 id=cloud-spanner>Cloud Spanner</h3>
<ul>
<li>Feats
<ul>
<li>scale to PB</li>
<li>Strong consistency</li>
<li>HA</li>
</ul>
</li>
</ul>
<h3 id=cloud-sql>Cloud SQL</h3>
<ul>
<li>MySQL/PostgreSQL</li>
<li>Auto replication
<ul>
<li>Vertical scaling (machine type)</li>
<li>(weak) Horizontal scaling (# of instaces)</li>
</ul>
</li>
<li><a href=https://cloud.google.com/sdk/gcloud/reference/sql target=_blank>&lt;code>gcloud sql&lt;/code></a>
</li>
</ul>
<h3 id=cloud-firestore>Cloud Firestore</h3>
<ul>
<li>2 modes:
<ul>
<li>Datastore mode -> server</li>
<li>Native mode -> mobile & web app</li>
</ul>
</li>
</ul>
<h2 id=network-resources>Network Resources</h2>
<h3 id=vpc>VPC</h3>
<ul>
<li><a href=https://cloud.google.com/vpc/docs/using-vpc target=_blank>Docs</a>
</li>
<li>Contained in a project</li>
<li><strong>VPC has global scope</strong> but <strong>subnets are regional</strong> (and cross zones)</li>
<li>Important features
<ul>
<li>built-in route table</li>
<li>built-in global distributed firewall</li>
</ul>
</li>
</ul>
<h4 id=netowrks>Netowrks</h4>
<ul>
<li>Default quota: 5 networks in a project</li>
<li>Has no IP range</li>
<li>Global and span all regions</li>
<li>Contains <strong>subnetworks</strong></li>
<li>Types:
<ul>
<li>Default
<ul>
<li>one subnet per region</li>
<li>default firewall rules: allow all ingress from ICMP, RDP & SSH and all internal traffic</li>
</ul>
</li>
<li>auto-mode
<ul>
<li>one subnet per region</li>
<li>regional IP alloc. (cannot overlapped with other subnets in the same network)</li>
<li>/20 mask (can be expanded up to /16)</li>
<li>all in 10.128.0.0/9</li>
<li>default firewall rules: deny all ingress, allow all egress</li>
</ul>
</li>
<li>custom-mode
<ul>
<li>no default subnets</li>
<li>full control of IP ranges</li>
<li>regional IP alloc.</li>
</ul>
</li>
</ul>
</li>
<li>Conversion
<ul>
<li>OK: default/auto -> custom</li>
<li>No: custom -> default/auto</li>
</ul>
</li>
<li>Communication
<ul>
<li>VMs in same network: using internal IP</li>
<li>VMs in different network (even in same region): using external IP by default</li>
</ul>
</li>
<li>4 reserved IP in each subnet
<ul>
<li>1st: network gateway</li>
<li>2nd: subnet gateway</li>
<li>2nd-to-last & last: for broadcast</li>
</ul>
</li>
<li>example:
<ul>
<li>VMs in same subnet but different zones
<ul>
<li>still communicate with same subnet IP</li>
<li>single firewall rule can apply to both VMs</li>
</ul>
</li>
</ul>
</li>
<li>IP range of a subnet cannot be shrinked</li>
</ul>
<h4 id=ip>IP</h4>
<ul>
<li>Each VM has internal & external IPs
<ul>
<li>Internal
<ul>
<li>Allocated from subnet to VM with DHCP</li>
<li>DHCP lease renew every 24h</li>
<li>Register to network-scope DNS with (VM name, IP)</li>
</ul>
</li>
<li>External
<ul>
<li>Can be
<ul>
<li>Ephemeral (assiged from pool)</li>
<li>Reserved</li>
</ul>
</li>
<li>VM does not know its external IP (mapped to internal IP)
<ul>
<li>Handled by using internal DNS resolver</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id=routes--firewall-rules>Routes & Firewall Rules</h4>
<ul>
<li>Every network has
<ul>
<li>routes: let instances in a network send traffic directly</li>
<li>s default route: direct packets to dest. outside the network</li>
</ul>
</li>
</ul>
<h4 id=pricing>Pricing</h4>
<ul>
<li>Network
<ul>
<li>Ingress: no charge</li>
<li>Egress with no charge:
<ul>
<li>to same zone via internal IP</li>
<li>to Google products (YouTube, map, etc.)</li>
<li>to different GCP services within same region</li>
</ul>
</li>
<li>Egress with chareg ($0.01 per GB):
<ul>
<li>to instances in another zone in the same region</li>
<li>to same zone via external IP</li>
<li>between regions in US & Canada</li>
</ul>
</li>
<li>Egress between regions outside US & Canada: varies by region</li>
</ul>
</li>
<li>External IP address
<ul>
<li>static IP (assigned but unused): $0.01 per hour</li>
<li>static/ephemeral IP used on standard VM: $0.004 per hour</li>
<li>static/ephemeral IP used on preemptible VM: $0.002 per hour</li>
<li>static/ephemeral IP attached to forward rules: no charge</li>
</ul>
</li>
</ul>
<h3 id=cloud-load-balancing>Cloud Load Balancing</h3>
<ul>
<li><a href=https://www.coursera.org/learn/preparing-cloud-associate-cloud-engineer-exam/lecture/BvaXg/planning-and-configuring-network-resources target=_blank>Brief Intro</a>
</li>
<li><a href=https://cloud.google.com/load-balancing/docs target=_blank>Cloud LB docs</a>
</li>
</ul>
<table>
<thead>
<tr>
<th style=text-align:center></th>
<th style=text-align:center>HTTP(S)</th>
<th style=text-align:center>SSL Proxy</th>
<th style=text-align:center>TCP Proxy</th>
<th style=text-align:center>Network UDP/TCP</th>
<th style=text-align:center>Internal UDP/TCP</th>
<th style=text-align:center>Internal HTTPS</th>
</tr>
</thead>
<tbody>
<tr>
<td style=text-align:center>types</td>
<td style=text-align:center>HTTP/HTTPS</td>
<td style=text-align:center>TCP with SSL load</td>
<td style=text-align:center>TCP without SSL load / doesn&rsquo;t preserver client IP</td>
<td style=text-align:center>TCP/UDP without SSL load / preserver client IP</td>
<td style=text-align:center>TCP or UDP</td>
<td style=text-align:center>HTTP or HTTPS</td>
</tr>
<tr>
<td style=text-align:center>scope</td>
<td style=text-align:center>global, IPv4/IPv6</td>
<td style=text-align:center>global, IPv4/IPv6</td>
<td style=text-align:center>global, IPv4/IPv6</td>
<td style=text-align:center>regional, IPv4</td>
<td style=text-align:center>regional, IPv4</td>
<td style=text-align:center>regional, IPv4</td>
</tr>
<tr>
<td style=text-align:center>ex/in</td>
<td style=text-align:center>external</td>
<td style=text-align:center>external</td>
<td style=text-align:center>external</td>
<td style=text-align:center>external</td>
<td style=text-align:center>internal</td>
<td style=text-align:center>internal</td>
</tr>
<tr>
<td style=text-align:center>port for LB</td>
<td style=text-align:center>HTTP:80/8080, HTTPS:443</td>
<td style=text-align:center>specific</td>
<td style=text-align:center>specific</td>
<td style=text-align:center>Any</td>
<td style=text-align:center>Any</td>
<td style=text-align:center>HTTP:80/8080, HTTPS:443</td>
</tr>
</tbody>
</table>
<h3 id=interconnections>Interconnections</h3>
<table>
<thead>
<tr>
<th style=text-align:center>Connection</th>
<th style=text-align:center>Provides</th>
<th style=text-align:center>Capacity</th>
<th style=text-align:center>Requirements</th>
<th style=text-align:center>Access Types</th>
</tr>
</thead>
<tbody>
<tr>
<td style=text-align:center>IPsec VPN tunnel</td>
<td style=text-align:center>encrypted tunnel to VPC networks throughpublic internet</td>
<td style=text-align:center>1.5-3Gbps per tunnel</td>
<td style=text-align:center>on-prem VPN-gateway</td>
<td style=text-align:center>internal IP</td>
</tr>
<tr>
<td style=text-align:center>Dedicated Interconnect</td>
<td style=text-align:center>dedicated, direct connection to VPC netwroks</td>
<td style=text-align:center>10Gbps per link (up to 8 links)</td>
<td style=text-align:center>connection in colocation facility</td>
<td style=text-align:center>internal IP</td>
</tr>
<tr>
<td style=text-align:center>Partner Interconnect</td>
<td style=text-align:center>dedicated connection to VPC through a service provider</td>
<td style=text-align:center>50Mbps-10Gbps per connection</td>
<td style=text-align:center>service provider</td>
<td style=text-align:center>internal IP</td>
</tr>
<tr>
<td style=text-align:center>Direct Peering</td>
<td style=text-align:center>dedicated, direct connection to Google&rsquo;s netwroks</td>
<td style=text-align:center>10 Gbps per link</td>
<td style=text-align:center>Connection in GCP PoPs</td>
<td style=text-align:center>public IP</td>
</tr>
<tr>
<td style=text-align:center>Carrier Peering</td>
<td style=text-align:center>Peering through Google&rsquo;s public network through provider</td>
<td style=text-align:center>varies</td>
<td style=text-align:center>service provider</td>
<td style=text-align:center>public IP</td>
</tr>
</tbody>
</table>
<ul>
<li>VPN
<ul>
<li>low volume data connections (MTU &lt; 1460 bytes)</li>
<li>static routes & dynamic routes (Cloud Router, border gateway protocol (BGP))</li>
</ul>
</li>
<li>Interconnect
<ul>
<li>
<table>
<thead>
<tr>
<th style=text-align:center></th>
<th style=text-align:center>dedicated</th>
<th style=text-align:center>shared</th>
</tr>
</thead>
<tbody>
<tr>
<td style=text-align:center>L3 (via public IP)</td>
<td style=text-align:center>Direct Peering</td>
<td style=text-align:center>Carrier Peering</td>
</tr>
<tr>
<td style=text-align:center>L2 (via VLAN)</td>
<td style=text-align:center>Dedicated Interconnect</td>
<td style=text-align:center>Partner Interconnect</td>
</tr>
</tbody>
</table>
</li>
<li>Dedicated Interconnect: Need to provision an cross-connect between Google network & own router, & establish BGP session between Cloud Router & on-premises router</li>
<li>Partner Interconnect: Need to connect to supported provider</li>
</ul>
</li>
<li>Peering
<ul>
<li>No SLA</li>
<li>Reach all Google services (GSuite, YouTube)</li>
<li>Google&rsquo;s edge points of presence (PoPs)</li>
</ul>
</li>
<li>Shared VPCs
<ul>
<li>Multiple projects share one VPC
<ul>
<li>One host project</li>
<li>Multiple service projects</li>
</ul>
</li>
<li>Centralized</li>
</ul>
</li>
<li>VPC Network Peering
<ul>
<li>Connection accross two VPC networks (no matter they are within same project/organization or not)</li>
<li>Decentralized</li>
</ul>
</li>
</ul>
<h2 id=stackdriver>Stackdriver</h2>
<ul>
<li>Monitoring</li>
<li>Logging</li>
<li>Debug</li>
<li>Error reporting</li>
<li>Trace</li>
</ul>
<ul>
<li><a href=https://www.qwiklabs.com/quests/35 target=_blank>Stackdriver Fundamentals Quest</a>
</li>
<li><a href=https://cloud.google.com/monitoring/alerts/ target=_blank>Docs - Intro to alerting</a>
</li>
<li><a href=https://cloud.google.com/monitoring/alerts/using-alerting-ui target=_blank>Docs - Managing alerting policies</a>
</li>
</ul>
<h2 id=big-data-platform>Big Data Platform</h2>
<h3 id=cloud-dataproc>Cloud Dataproc</h3>
<ul>
<li>Based on Hadoop</li>
<li>Scale without terminating jobs</li>
<li>Reduce cost with preemptible instances</li>
</ul>
<h3 id=cloud-dataflow>Cloud Dataflow</h3>
<ul>
<li>ETL pipeline</li>
<li>Data analysis
<ul>
<li>batch computation</li>
<li>continuous computation using streaming</li>
</ul>
</li>
</ul>
<h3 id=bigquery>BigQuery</h3>
<ul>
<li>data warehouse</li>
<li>no cluster maintenance is required</li>
<li>fast query</li>
<li>pay separately for storage & queries</li>
<li>reduce cost automatically if sustained usage</li>
<li>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=color:#6272a4># show process bytes -&gt; check price with price calculator</span>
bq query --dry_run
</code></pre></div></li>
</ul>
<h3 id=cloud-pubsub>Cloud Pub/Sub</h3>
<ul>
<li>&ldquo;At least once&rdquo; delivery</li>
</ul>
<h3 id=cloud-datalab>Cloud Datalab</h3>
<ul>
<li>Built on Python Jupyter</li>
</ul>
<h2 id=cloud-marketplace>Cloud Marketplace</h2>
<ul>
<li>Tool for fast deploying functional packages, e.g. LAMP, Wordpress</li>
<li>GCP doesn&rsquo;t update/fix the services that are already deployed</li>
</ul>
<h2 id=deployment-manager>Deployment Manager</h2>
<ul>
<li><a href=https://cloud.google.com/deployment-manager/docs/ target=_blank>Docs</a>
</li>
<li><a href=https://cloud.google.com/deployment-manager/docs/fundamentals target=_blank>Docs - fundamentals</a>
</li>
</ul>
<hr>
<ul class=pager>
<li class=previous>
<a href=/2020/06/11/hugo-tips/ data-toggle=tooltip data-placement=top title="Hugo Tips">&larr;
Previous Post</a>
</li>
<li class=next>
<a href=/2020/07/01/gcp-ace/ data-toggle=tooltip data-placement=top title="My Preparation of GCP ACE Certification (2020)">Next
Post &rarr;</a>
</li>
</ul>
<div id=fb-root></div>
<script async defer crossorigin=anonymous src="https://connect.facebook.net/en_US/sdk.js#xfbml=1&version=v12.0&appId=221193225126786&autoLogAppEvents=1" nonce=2LnlgHdl></script>
<div class=fb-comments data-href=https://mattwang44.dev/2020/06/15/gcp-ace-note/ data-width=600 data-numposts=5></div>
</div>
<div class="col-lg-2 col-lg-offset-0
visible-lg-block
sidebar-container
catalog-container">
<div class=side-catalog>
<hr class="hidden-sm hidden-xs">
<h5>
<a class=catalog-toggle href=#>CATALOG</a>
</h5>
<ul class=catalog-body></ul>
</div>
</div>
<div class="col-lg-11 col-lg-offset-1
col-md-10 col-md-offset-1
sidebar-container">
<section>
<hr class="hidden-sm hidden-xs">
<h5><a href=/tags/>FEATURED TAGS</a></h5>
<div class=tags>
<a href=/tags/course title=course>
course
</a>
<a href=/tags/css title=css>
css
</a>
<a href=/tags/cv title=cv>
cv
</a>
<a href=/tags/devops title=devops>
devops
</a>
<a href=/tags/gcp title=gcp>
gcp
</a>
<a href=/tags/gnn title=gnn>
gnn
</a>
<a href=/tags/html title=html>
html
</a>
<a href=/tags/iac title=iac>
iac
</a>
<a href=/tags/matlab title=matlab>
matlab
</a>
<a href=/tags/misc title=misc>
misc
</a>
<a href=/tags/slides title=slides>
slides
</a>
<a href=/tags/terraform title=terraform>
terraform
</a>
</div>
</section>
</div>
</div>
</div>
</article>
<footer>
<div class=container>
<div class=row>
<div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
<ul class="list-inline text-center">
<li>
<a href rel=alternate type=application/rss+xml title="WHW's blog">
<span class="fa-stack fa-lg">
<i class="fas fa-circle fa-stack-2x"></i>
<i class="fas fa-rss fa-stack-1x fa-inverse"></i>
</span>
</a>
</li>
<li>
<a href=mailto:mattwang44@gmail.com>
<span class="fa-stack fa-lg">
<i class="fas fa-circle fa-stack-2x"></i>
<i class="fas fa-envelope fa-stack-1x fa-inverse"></i>
</span>
</a>
</li>
<li>
<a href=https://twitter.com/mattwang44>
<span class="fa-stack fa-lg">
<i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-twitter fa-stack-1x fa-inverse"></i>
</span>
</a>
</li>
<li>
<a target=_blank href="https://www.facebook.com/profile.php?id=100000194291071">
<span class="fa-stack fa-lg">
<i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-facebook fa-stack-1x fa-inverse"></i>
</span>
</a>
</li>
<li>
<a target=_blank href=https://github.com/mattwang44>
<span class="fa-stack fa-lg">
<i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-github fa-stack-1x fa-inverse"></i>
</span>
</a>
</li>
<li>
<a target=_blank href=https://www.linkedin.com/in/wei-hsiang-wang-60841b108/>
<span class="fa-stack fa-lg">
<i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-linkedin fa-stack-1x fa-inverse"></i>
</span>
</a>
</li>
<li>
<a target=_blank href=https://medium.com/@mattwang44>
<span class="fa-stack fa-lg">
<i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-medium fa-stack-1x fa-inverse"></i>
</span>
</a>
</li>
<li>
<a target=_blank href=https://stackoverflow.com/users/7969188/matt-wang>
<span class="fa-stack fa-lg">
<i class="fas fa-circle fa-stack-2x"></i>
<i class="fab fa-stack-overflow fa-stack-1x fa-inverse"></i>
</span>
</a>
</li>
</ul>
<p class="copyright text-muted">
Copyright &copy; WHW's blog 2021
<br>
<a href=https://themes.gohugo.io/hugo-theme-cleanwhite>CleanWhite Hugo Theme</a> by <a href=https://zhaohuabing.com>Huabing</a> |
<iframe style=margin-left:2px;margin-bottom:-5px frameborder=0 scrolling=0 width=100px height=20px src="https://ghbtns.com/github-btn.html?user=zhaohuabing&repo=hugo-theme-cleanwhite&type=star&count=true"></iframe>
</p>
</div>
</div>
</div>
</footer>
<script>function loadAsync(f,b){var c=document,d='script',a=c.createElement(d),e=c.getElementsByTagName(d)[0];a.src=f,b&&a.addEventListener('load',function(a){b(null,a)},!1),e.parentNode.insertBefore(a,e)}</script>
<script>$('#tag_cloud').length!==0&&loadAsync("/js/jquery.tagcloud.js",function(){$.fn.tagcloud.defaults={color:{start:'#bbbbee',end:'#0085a1'}},$('#tag_cloud a').tagcloud()})</script>
<script>loadAsync("https://cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.js",function(){var a=document.querySelector("nav");a&&FastClick.attach(a)})</script>
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga('create','UA-210096427-1','auto'),ga('send','pageview'))</script>
<script async src=https://www.google-analytics.com/analytics.js></script>
<script type=text/javascript>function generateCatalog(a){_containerSelector='div.post-container';var h=$(_containerSelector),c,d,e,f,g,b;return c=h.find('h1,h2,h3,h4,h5,h6'),$(a).html(''),c.each(function(){d=$(this).prop('tagName').toLowerCase(),g="#"+$(this).prop('id'),e=$(this).text(),b=$('<a href="'+g+'" rel="nofollow">'+e+'</a>'),f=$('<li class="'+d+'_nav"></li>').append(b),$(a).append(f)}),!0}generateCatalog(".catalog-body"),$(".catalog-toggle").click(function(a){a.preventDefault(),$('.side-catalog').toggleClass("fold")}),loadAsync("/js/jquery.nav.js",function(){$('.catalog-body').onePageNav({currentClass:"active",changeHash:!1,easing:"swing",filter:"",scrollSpeed:700,scrollOffset:0,scrollThreshold:.2,begin:null,end:null,scrollChange:null,padding:80})})</script>
</body>
</html>